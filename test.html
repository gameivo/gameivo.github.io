<!DOCTYPE html>
<html>
<head>
    <title>Blocops Game</title>
    <meta name="referrer" content="no-referrer">
    <style>
        body { margin: 0; padding: 0; }
        iframe { width: 100vw; height: 100vh; border: none; }
    </style>
</head>
<body>
    <iframe id="game" allowfullscreen></iframe>
    
    <script>
        // استخدم أحد هذه الخدمات المجانية كوسيط:
        const proxyServices = [
            // خدمة CORS Anywhere (قد تحتاج إلى طلب وصول مؤقت)
            'https://cors-anywhere.herokuapp.com/https://blocops.io/',
            
            // AllOrigins (بديل جيد)
            'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://blocops.io/'),
            
            // CORS Proxy
            'https://proxy.cors.sh/https://blocops.io/',
            
            // your-own-proxy على Render/Vercel/Netlify
            'https://your-proxy.onrender.com/proxy?url=https://blocops.io'
        ];
        
        async function tryLoadGame() {
            for (let proxy of proxyServices) {
                try {
                    const response = await fetch(proxy);
                    if (response.ok) {
                        const html = await response.text();
                        
                        // تعديل HTML لاستبدال جميع روابط crazygames.com
                        const modifiedHtml = html.replace(
                            /https?:\/\/www\.crazygames\.com/g,
                            'https://blocops.io'
                        ).replace(
                            /https?:\/\/crazygames\.com/g,
                            'https://blocops.io'
                        );
                        
                        // إنشاء Blob URL
                        const blob = new Blob([modifiedHtml], { type: 'text/html' });
                        const blobUrl = URL.createObjectURL(blob);
                        
                        document.getElementById('game').src = blobUrl;
                        return;
                    }
                } catch (e) {
                    console.log(`فشل ${proxy}:`, e);
                    continue;
                }
            }
            
            // إذا فشلت جميع البروكسيات، جرب التضمين المباشر
            document.getElementById('game').src = 'https://blocops.io/';
        }
        
        tryLoadGame();
    </script>
</body>
</html>
